!function(h){h.fn.jqm=function(e){var t={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:f,ajaxText:"",target:f,modal:f,toTop:f,onShow:f,onHide:f,onLoad:f};return this.each(function(){if(this._jqm)return m[this._jqm].c=h.extend({},m[this._jqm].c,e);o++,this._jqm=o,m[o]={c:h.extend(t,h.jqm.params,e),a:f,w:h(this).addClass("jqmID"+o),s:o},t.trigger&&h(this).jqmAddTrigger(t.trigger)})},h.fn.jqmAddClose=function(e){return i(this,e,"jqmHide")},h.fn.jqmAddTrigger=function(e){return i(this,e,"jqmShow")},h.fn.jqmShow=function(e){return this.each(function(){e=e||window.event,h.jqm.open(this._jqm,e)})},h.fn.jqmHide=function(e){return this.each(function(){e=e||window.event,h.jqm.close(this._jqm,e)})},h.jqm={hash:{},open:function(e,t){var o=m[e],n=o.c,s="."+n.closeClass,i=0<(i=parseInt(o.w.css("z-index")))?i:3e3,r=h("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":i-1,opacity:n.overlay/100});if(o.a)return f;if(o.t=t,o.a=!0,o.w.css("z-index",i),n.modal?(u[0]||w("bind"),u.push(e)):0<n.overlay?o.w.jqmAddClose(r):r=f,o.o=r?r.addClass(n.overlayClass).prependTo("body"):f,l&&(h("html,body").css({height:"100%",width:"100%"}),r))for(var a in r=r.css({position:"absolute"})[0],{Top:1,Left:1})r.style.setExpression(a.toLowerCase(),"(_=(document.documentElement.scroll"+a+" || document.body.scroll"+a+"))+'px'");if(n.ajax){var c=n.target||o.w,d=n.ajax;c="string"==typeof c?h(c,o.w):h(c),d="@"==d.substr(0,1)?h(t).attr(d.substring(1)):d;c.html(n.ajaxText).load(d,function(){n.onLoad&&n.onLoad.call(this,o),s&&o.w.jqmAddClose(h(s,o.w)),j(o)})}else s&&o.w.jqmAddClose(h(s,o.w));return n.toTop&&o.o&&o.w.before('<span id="jqmP'+o.w[0]._jqm+'"></span>').insertAfter(o.o),n.onShow?n.onShow(o):o.w.show(),j(o),f},close:function(e){var t=m[e];return t.a&&(t.a=f,u[0]&&(u.pop(),u[0]||w("unbind")),t.c.toTop&&t.o&&h("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),f},params:{}};var o=0,m=h.jqm.hash,u=[],l=h.browser.msie&&"6.0"==h.browser.version,f=!1,t=h('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),j=function(e){l&&(e.o?e.o.html('<p style="width:100%;height:100%"/>').prepend(t):h("iframe.jqm",e.w)[0]||e.w.prepend(t)),n(e)},n=function(e){try{h(":input:visible",e.w)[0].focus()}catch(e){}},w=function(e){h()[e]("keypress",s)[e]("keydown",s)[e]("mousedown",s)},s=function(e){var t=m[u[u.length-1]],o=!h(e.target).parents(".jqmID"+t.s)[0];return o&&n(t),!o},i=function(e,t,o){return e.each(function(){var e=this._jqm;h(t).each(function(){this[o]||(this[o]=[],h(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])m[this[e][t]]&&m[this[e][t]].w[e](this);return f})),this[o].push(e)})})}}(jQuery);